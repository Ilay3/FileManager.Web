@page "/Admin/Settings/Permissions"
@model FileManager.Web.Pages.Admin.Settings.PermissionsModel
@attribute [Microsoft.AspNetCore.Authorization.Authorize]
@{
    ViewData["Title"] = "Права ролей";

    if (User.FindFirst("IsAdmin")?.Value != "True")
    {
        Response.Redirect("/Files");
        return;
    }
}

<h2>Права ролей</h2>

@if (TempData["Success"] != null)
{
    <div class="alert alert-success">@TempData["Success"]</div>
}

<form method="post">
    <table class="table">
        <thead>
            <tr>
                <th>Группа</th>
                <th>Чтение</th>
                <th>Запись</th>
                <th>Удаление</th>
                <th>Управление доступом</th>
                <th>Восстановление</th>
            </tr>
        </thead>
        <tbody>
        @for (int i = 0; i < Model.Groups.Count; i++)
        {
            <tr>
                <td>
                    @Model.Groups[i].Name
                    <input type="hidden" asp-for="Groups[i].Id" />
                    <input type="hidden" asp-for="Groups[i].Name" />
                </td>
                <td class="text-center"><input type="checkbox" asp-for="Groups[i].Read" /></td>
                <td class="text-center"><input type="checkbox" asp-for="Groups[i].Write" /></td>
                <td class="text-center"><input type="checkbox" asp-for="Groups[i].Delete" /></td>
                <td class="text-center"><input type="checkbox" asp-for="Groups[i].ManageAccess" /></td>
                <td class="text-center"><input type="checkbox" asp-for="Groups[i].Restore" /></td>
            </tr>
        }
        </tbody>
    </table>
    <button type="submit" class="btn btn-primary">Сохранить</button>
</form>
