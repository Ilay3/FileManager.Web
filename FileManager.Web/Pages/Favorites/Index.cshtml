@page "/Favorites"
@model FileManager.Web.Pages.Favorites.IndexModel
@using System.Linq
@attribute [Microsoft.AspNetCore.Authorization.Authorize]
@{
    ViewData["Title"] = "Избранное";
}

<div class="container mt-4">
    <h2 class="mb-4">@ViewData["Title"]</h2>

    @if (Model.Favorites.Any())
    {
        ViewData["FavoriteList"] = true;
        @await Html.PartialAsync("Files/_FilesGrid", Model.Favorites)
    }
    else
    {
        <div class="alert alert-info">У вас пока нет избранных элементов.</div>
    }
</div>

@section Scripts {
<script>
async function removeFavorite(id, type) {
    const url = type === 'file' ? `/api/favorites/files/${id}` : `/api/favorites/folders/${id}`;
    const response = await fetch(url, { method: 'DELETE', credentials: 'include' });
    if (response.ok) {
        alert('Элемент удален из избранного');
        location.reload();
    } else {
        alert('Не удалось удалить из избранного');
    }
}
</script>
}
